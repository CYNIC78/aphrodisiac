<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aphrodisiac, by cynic</title>
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’–</text></svg>"
        type="image/x-icon">
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github-dark.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VCHJXFGB08"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-VCHJXFGB08');
    </script>

</head>


<body>
    <div class="container">
        <div class="sidebar">
            <div class="header">
                <button class="material-symbols-outlined btn-textual" id="btn-hide-sidebar">
                    arrow_back_ios_new
                </button>
                <img src="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’–</text></svg>" id="gemin-pro-logo">
                <div id="title-div">
                    <div id="aphrodisiac-branding">Aphrodisiac</div>
                    <div id="cynic-branding"></div>
                </div>
                <button class="badge" id="btn-whatsnew">
                    <span id="badge-version"></span>
                </button>
            </div>
            <div class="navbar">
                <div class="navbar-tab">Chats</div>
                <div class="navbar-tab">Personalities</div>
                <div class="navbar-tab">Settings</div>
                <div id="navbar-tab-highlight"></div>
            </div>
            <div id="sidebar-content">
                <div class="sidebar-section">
                    <div class="btn-array">
                        <button id="btn-new-chat">
                            <span class="material-symbols-outlined">add</span> <span>New Chat</span>
                        </button>
                        <button id="btn-reset-chat">
                            <span class="material-symbols-outlined">clear_all</span>Clear All
                        </button>
                    </div>

                    <input type="radio" name="currentChat" value="none" checked>
                    <div id="chatHistorySection">

                    </div>
                </div>

                <div class="sidebar-section" id="personalitySection">
                    <div class="btn-array">
                        <button id="btn-import-personality">
                            <span class="material-symbols-outlined">upload</span>Import
                        </button>
                        <button id="btn-clearall-personality">
                            <span class="material-symbols-outlined">clear_all</span>Clear All
                        </button>
                    </div>
                    <div id="personalitiesDiv"></div>
                </div>

                <div class="sidebar-section">
                    <h3>API Key</h3>
                    <div class="api-key">
                        <input type="password" autocomplete="off" placeholder="Paste API key here" id="apiKeyInput"
                            class="input-field"></input>
                        <button class="material-symbols-outlined btn-textual" onclick="window.open('https://aistudio.google.com/app/apikey', '_blank')">
                            help
                        </button>
                    </div>
                    <div class="api-key-error">
                        <span class="material-symbols-outlined">error</span> Invalid API Key
                    </div>
                    <h3>Generation Settings</h3>
                    <div class="generation-settings">
                        <div>
                            <label class="setting-label" for="selectedModel"><span class="material-symbols-outlined">neurology</span>Model
                                <span class="material-symbols-outlined tooltip" 
                                style="font-size: 0.885rem; opacity: 0.6; cursor:default"
                                info="Pro model has a very low daily limit. It is recommmended to stick to Flash or Flash Lite, only falling back to pro for high priority requests.">
                                    info
                                </span> </label>
                            <select id="selectedModel" class="input-field">
                                <option value="gemini-2.0-flash">Gemini Flash 2.0</option>
                                <option value="gemini-2.5-flash-preview-04-17" selected="true">Gemini Flash 2.5</option>
                                <option value="gemini-2.5-pro">Gemini Pro 2.5</option>
                            </select>
                        </div>
                        <div>
                            <label class="setting-label" for="maxTokens"><span class="material-symbols-outlined">generating_tokens</span><span>
                                Max Output
                                    Tokens
                            </span>
                            <span class="material-symbols-outlined tooltip" 
                            style="font-size: 0.885rem; opacity: 0.6; cursor:default"
                            info="Dictates the maximum length of the model's response. If responses get cut off, increase this value.">
                                info
                            </span> 
                        </label>
                            <input type="number" id="maxTokens" class="input-field" min="1" max="1000000" value="1000"></input>
                        </div>
                        <div>
                            <label class="setting-label" for="safetySettings"><span class="material-symbols-outlined">
                                    health_and_safety
                                </span>
                                <span>Safety</span>
                                <span class="material-symbols-outlined tooltip" 
                                style="font-size: 0.885rem; opacity: 0.6; cursor:default"
                                info="Controls the model's sensitivity to potentially harmful content.">
                                    info
                                </span> </label>
                            <select id="safetySettings" class="input-field">
                                <option value="safe">Safe</option>
                                <option value="moderate">Moderate</option>
                                <option value="risky" selected="true">Risky</option>
                            </select>
                        </div>
                        <div>
                            <label class="setting-label" for="temperature">
                                <span class="material-symbols-outlined">thermostat</span>
                                <span>Temperature</span> 
                                <span class="material-symbols-outlined tooltip" 
                                style="font-size: 0.885rem; opacity: 0.6; cursor:default"
                                info="Lower values are more deterministic, higher values are more creative. The recommended range is between 0.5 and 1.25.">
                                    info
                                </span> 
                            </label>
                            <div class="btn-array">
                                <input type="range" min="20" max="200" id="temperature" class="slider">
                                <label id="label-temperature">0</label>
                            </div>
                        </div>
                    </div>
                    <h3>User Experience</h3>
                    <div>
                        <div style="display: flex; gap: 0.25rem; align-items: center;">
                            <input id="autoscroll" type="checkbox" name="autoscrollEnabled"></input>
                            <label for="autoscroll">Autoscroll</label>
                        </div>
                    </div>
                    <div style="margin-top: 1rem;">
                        <label class="setting-label" for="typingSpeed">
                            <span class="material-symbols-outlined">speed</span>
                            <span>Typing Delay</span>
                            <span class="material-symbols-outlined tooltip" 
                            style="font-size: 0.885rem; opacity: 0.6; cursor:default"
                            info="Controls the delay between characters for the AI's response (in milliseconds). Higher values mean slower typing, 0 is instant.">
                                info
                            </span> 
                        </label>
                        <div class="btn-array">
                            <input type="range" min="0" max="100" id="typingSpeed" class="slider">
                            <label id="label-typingSpeed">0</label>
                        </div>
                    </div>

                    <!-- ========================== -->
                    <!-- == NEW TRIGGER SETTINGS == -->
                    <!-- ========================== -->
                    <h3>Trigger System</h3>
                    <div class="trigger-settings">
                        <div class="trigger-symbols-wrapper">
                            <div>
                                <label class="setting-label" for="triggerSymbolStart">
                                    <span class="material-symbols-outlined">start</span>
                                    <span>Start Symbol</span>
                                </label>
                                <input type="text" id="triggerSymbolStart" class="input-field"></input>
                            </div>
                            <div>
                                <label class="setting-label" for="triggerSymbolEnd">
                                    <span class="material-symbols-outlined">keyboard_tab</span>
                                    <span>End Symbol</span>
                                </label>
                                <input type="text" id="triggerSymbolEnd" class="input-field"></input>
                            </div>
                        </div>
                         <div>
                            <div style="display: flex; gap: 0.25rem; align-items: center;">
                                <input id="enableAudio" type="checkbox" name="enableAudio"></input>
                                <label for="enableAudio">Enable Audio Triggers</label>
                            </div>
                        </div>
                        <div>
                            <label class="setting-label" for="globalVolume">
                                <span class="material-symbols-outlined">volume_up</span>
                                <span>Global Volume</span>
                            </label>
                            <div class="btn-array">
                                <input type="range" min="0" max="100" id="globalVolume" class="slider">
                                <label id="label-globalVolume">0</label>
                            </div>
                        </div>
                    </div>
                    <!-- ========================== -->
                    <!-- == END TRIGGER SETTINGS == -->
                    <!-- ========================== -->
                </div>
            </div>


            <div class="credits">
                Made by CYNIC
            </div>
        </div>
        
        <!-- NEW: This is the draggable handle for the sidebar -->
        <div id="sidebar-resizer"></div>

        <div id="mainContent">
            <div class="header">
                <button class="material-symbols-outlined btn-textual" id="btn-show-sidebar">
                    menu
                </button>
            </div>
            <div class="message-container"></div>
            <div id="message-box">
                <span contenteditable placeholder="Send a message" id="messageInput" class="input-field"></span>
                <button type="submit" class="btn-textual material-symbols-outlined" id="btn-send">send</button>
            </div>
        </div>
    </div>

	<div class="overlay">
		<div class="header">
			<button class="btn-textual" id="btn-hide-overlay">BACK</button>
		</div>
		<div class="overlay-content">
			<form id="form-add-personality">
				<div class="stepper first-step" id="stepper-add-personality">
					<div class="stepper-content">
						<div class="step active">
							<!-- Basic Info Step -->
							<h3>Basic Info</h3>
							<input style="display: none;" name="id">
							<label for="name">Name:</label>
							<input type="text" name="name" id="name" placeholder="Mario" list="name-list" autocomplete="off">
							<label for="description">Description:</label>
							<input type="text" name="description" id="description" placeholder="A  plumber with a shroom addiction." autocomplete="off">
							<label for="image">Image URL:</label>
							<input type="text" name="image" id="image" placeholder="https://example.com/mario.png" autocomplete="off">
							<label for="prompt">System Prompt:</label>
							<textarea type="text" name="prompt" id="prompt"
								placeholder="You are to act as main character from the Mario video game series..."
								style="height: 25rem; resize:vertical" autocomplete="off"></textarea>
						</div>
						<div class="step">
							<!-- AI Directives Step -->
							<h3>AI Directives</h3>
                            <label for="tagPrompt" class="setting-label">
                                <span>Tag Prompt</span>
                                <span class="material-symbols-outlined tooltip" 
                                    style="font-size: 0.885rem; opacity: 0.6; cursor:default"
                                    info="This field teaches the AI how to link a system Command to your custom Trigger.
Format: [Command:Trigger]
Example: In [avatar:happy], 'avatar' is the Command and 'happy' is your custom Trigger tag.'.">
                                        info
                                </span> 
                            </label>
							<textarea name="tagPrompt" id="tagPrompt"
								placeholder="Teach the AI how to use special effects!
The format is [Command:Trigger]

â€¢ COMMAND is the type of media: 'avatar' for images, or 'sfx' for sounds.
â€¢ TRIGGER is the custom tag you gave the asset in the Asset Manager.

EXAMPLES FOR THE AI:
To change the avatar for an image you tagged 'smiling':
[avatar:smiling]

To play a sound you tagged 'door_opens':
[sfx:door_opens]"
								style="height: 15rem; resize:vertical;" autocomplete="off"></textarea>
							
                            <h3>Tweaks</h3>
                            <label for="reminder">Reminder (Hidden Instruction for AI):</label>
                            <textarea name="reminder" id="reminder"
                                placeholder="Remember to speak in a charming, slightly sarcastic tone. Always refer to the user as 'my dear'."
                                style="height: 10rem; resize:vertical;" autocomplete="off"></textarea>
						</div>
						<div class="step">
							<!-- Tone Examples Step -->
							<div>
								<h3 style="display:inline">Tone Examples</h3>
								<span style="opacity: 60%; font-size: 90%; font-style: italic;">Optional</span>
							</div>
							<input type="text" name="tone-example-1" class="tone-example"
								placeholder="I'm a plumber, not a doctor. Lets-a go!" aria-label="Tone Example 1">
							<button type="button" id="btn-add-tone-example"
								class="material-symbols-outlined">add_circle</button>
						</div>
						
						<!-- ================================== -->
						<!-- ==  REBUILT MEDIA LIBRARY STEP  == -->
						<!-- ================================== -->
						<div class="step" id="media-library-step">
							<div class="media-library-layout">
								<div class="tag-explorer">
									<h3>Tags</h3>
									<input type="search" id="tag-explorer-search" placeholder="Filter tags..." aria-label="Filter media assets by tag">
									<div id="tag-explorer-list">
										<!-- All unique tags will be rendered here by JS -->
									</div>
								</div>
								<div class="gallery-main">
									<div class="gallery-header">
										<h3 id="gallery-title">All Assets</h3>
										<button type="button" class="btn-with-icon" id="btn-upload-asset">
											<span class="material-symbols-outlined">upload_file</span>
											Upload
										</button>
									</div>
									<input type="file" id="asset-upload-input" multiple accept="image/*,audio/*" style="display: none;">
									<div id="asset-manager-gallery">
										<!-- Asset cards will be injected here by JS -->
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="stepper-footer">
						<button id="btn-stepper-previous" type="button">Previous</button>
						<div id="stepper-progress"></div>
						<button id="btn-stepper-next" type="button">Next</button>
						<button id="btn-stepper-submit" type="submit">Submit</button>
					</div>
				</div>
			</form>

			<!-- The What's New View remains unchanged -->
			<div id="whats-new">
				<h1 id="header-version">What's New in </h1>
				<ul id="changelog">
					<li>Warning: Pro model is currently disabled for free users. <br>
						This is a limitation set by Google and cannot be bypassed. 
						<a href="https://x.com/officiallogank/status/1922357621178200248">More info</a></li>
					
					<li>Visit my discord if you'd like to connect regarding the project, need support, or have any
						questions: <a href="https://discord.gg/ZbdPu4Dm3e">Discord Server</a></li>
				</ul>
			</div>
		</div>
	</div>

    <script type="module" src="main.js"></script>
</body>

</html>